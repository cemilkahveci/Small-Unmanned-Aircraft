% x_trim is the trimmed state,
% u_trim is the trimmed input
function [A_lon B_lon A_lat B_lat]=compute_ss_model(filename,x_trim,u_trim)
  
[A,B,C,D]=linmod('mavsim_trim',x_trim,u_trim);


A_lat=[A(5,5) A(5,10) A(5,12) A(5,7) A(5,9);...
    A(10,5) A(10,10) A(10,12) A(10,7) A(10,9);...
    A(12,5) A(12,10) A(12,12) A(12,7) A(12,9);...
    A(7,5) A(7,10) A(7,12) A(7,7) A(7,9);...
    A(9,5) A(9,10) A(9,12) A(9,7) A(9,9)];
A_lon=[A(4,4) A(4,6) A(4,11) A(4,8) A(4,3);...
    A(6,4) A(6,6) A(6,11) A(6,8) A(6,3);...
    A(11,4) A(11,6) A(11,11) A(11,8) A(11,3);...
    A(8,4) A(8,6) A(8,11) A(8,8) A(8,3);...
    A(3,4) A(3,6) A(3,11) A(3,8) A(3,3)];
B_lat=[B(5,2) B(5,3);...
    B(10,2) B(10,3);...
    B(12,2) B(12,3);...
    B(7,2) B(7,3);...
    B(9,2) B(9,3)];
B_lon=[B(4,1) B(4,4);...
    B(6,1) B(6,4);...
    B(11,2) B(11,4);...
    B(8,1) B(8,4);...
    B(3,1) B(3,4)];